<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">
	<!--<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>-->
	<script src="../jquery.js"></script>
        <script src="firera.js"></script>
	<style>
		.added-to-cart {
			background-color: whitesmoke;
		}
		.add-to-cart {
			cursor: pointer;
		}
		.goods li {
			margin: 10px;
			border-bottom: 1px solid green;
		}
	</style>
    </head>
    <body>
	    <div class="goods-list">
		    <ul class="goods" data-fr="goods">
			    <li>
				    <div data-fr="title">
					    
				    </div>
				    <div data-fr="brand">
					    
				    </div>
				    <div data-fr="tags">
					    <div data-fr="item">
						    
					    </div>   
				    </div>
				    <div data-fr="price">
					    
				    </div>
				    <div class="add-to-cart">
					  Add to cart  
				    </div>
			    </li>
		    </ul>
		    <div>
			    You have <span data-fr="cart-num"></span> goods in yout chopping cart!
		    </div>
	    </div>
<script> 

var app = new Firera.hash(
	{
		goods: [
			{
				title: 'X1',
				brand: 'Sony',
				tags: ['stereo', 'mobile', 'fm'],
				price: 150,
				added_to_cart: false
			},
			{
				title: 'X2',
				brand: 'Sony',
				tags: ['mono', 'thin', 'plazma', 'awesome'],
				price: 250,
				added_to_cart: false
			},
			{
				title: 'A1',
				brand: 'JVC',
				tags: ['new', 'green', 'cheap'],
				price: 300,
				added_to_cart: true
			}
		]
	},
	{
		'cart-num': ['counts', 'added_to_cart', 'goods'],
		goods: {
			".add-to-cart|click": [['filter', '!added_to_cart'], function(item){ 
				item("added_to_cart").set(true);
			}],
			'root|toggleClass(added-to-cart)': ['is', 'added_to_cart'],
		}
	}
);

app.applyTo('.goods-list');

</script>
    </body>
</html>